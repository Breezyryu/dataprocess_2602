# í•¨ìˆ˜ ìˆ˜ì • ì™„ë£Œ ë³´ê³ ì„œ

## ğŸ“‹ ìˆ˜ì • ê°œìš”

ë‘ í•¨ìˆ˜ê°€ **ì…ë ¥ ë°ì´í„°ë¥¼ ì§ì ‘ ìˆ˜ì •**í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤:

1. `cycle_list_processor.process_all_channels(data)`
2. `channel_categorizer.categorize_all_channels(data)`

## ğŸ”§ ìˆ˜ì • ë‚´ìš©

### 1. `cycle_list_processor.py`

**ë¬¸ì œì :**

- ì…ë ¥ëœ `data` ê°ì²´ë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ì—¬ ì›ë³¸ ë°ì´í„°ê°€ í›¼ì†ë¨
- `channel_data['profile'] = cycle_list` ë¼ì¸ì—ì„œ ì›ë³¸ profileì„ ë®ì–´ì”€

**ìˆ˜ì • ì‚¬í•­:**

```python
# ì¶”ê°€ëœ import
import copy

# í•¨ìˆ˜ ì‹œì‘ ë¶€ë¶„ì— ì¶”ê°€
def process_all_channels(data):
    # ì…ë ¥ ë°ì´í„°ì˜ ê¹Šì€ ë³µì‚¬ë³¸ ìƒì„± (ì›ë³¸ ë³´ì¡´)
    data = copy.deepcopy(data)

    # ì´í›„ ë¡œì§ì€ ë™ì¼...
```

**íš¨ê³¼:**

- âœ… ì›ë³¸ `data` ê°ì²´ëŠ” ìˆ˜ì •ë˜ì§€ ì•ŠìŒ
- âœ… ìƒˆë¡œìš´ ë³µì‚¬ë³¸ì„ ë°˜í™˜í•˜ì—¬ ì›ë³¸ ë³´ì¡´
- âœ… í•¨ìˆ˜ í˜¸ì¶œ í›„ì—ë„ ì›ë³¸ ë°ì´í„° ì¬ì‚¬ìš© ê°€ëŠ¥

---

### 2. `channel_categorizer.py`

**ë¬¸ì œì :**

- `cycle_list`ë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ì—¬ ì›ë³¸ ë°ì´í„°ì— `category` ì»¬ëŸ¼ì´ ì¶”ê°€ë¨
- `cycle_categorizer.add_category_labels(cycle_list, categories)` í˜¸ì¶œ ì‹œ ì›ë³¸ ìˆ˜ì •

**ìˆ˜ì • ì‚¬í•­:**

```python
# ì¶”ê°€ëœ import
import copy

# ë£¨í”„ ë‚´ë¶€ì—ì„œ ë³µì‚¬ë³¸ ìƒì„±
for channel_key, channel_data in data['channels'].items():
    # Profile ë°ì´í„° í™•ì¸
    cycle_list_original = channel_data['profile']

    if not isinstance(cycle_list_original, list):
        continue

    # cycle_listì˜ ê¹Šì€ ë³µì‚¬ë³¸ ìƒì„± (ì›ë³¸ ë³´ì¡´)
    cycle_list = copy.deepcopy(cycle_list_original)

    # ì¹´í…Œê³ ë¦¬í™” ìˆ˜í–‰ (ë³µì‚¬ë³¸ì—ë§Œ ì ìš©)
    categories = cycle_categorizer.categorize_cycles(cycle_list)
    cycle_categorizer.add_category_labels(cycle_list, categories)

    # ê²°ê³¼ ì €ì¥ (ë³µì‚¬ë³¸ ì €ì¥)
    results[channel_key] = {
        'categories': categories,
        'cycle_list': cycle_list  # ë³µì‚¬ë³¸
    }
```

**íš¨ê³¼:**

- âœ… ì›ë³¸ `data['channels'][...]['profile']`ëŠ” ìˆ˜ì •ë˜ì§€ ì•ŠìŒ
- âœ… ê²°ê³¼ ë”•ì…”ë„ˆë¦¬ì—ë§Œ ì¹´í…Œê³ ë¦¬ê°€ ì¶”ê°€ëœ ë³µì‚¬ë³¸ ì €ì¥
- âœ… ì›ë³¸ ë°ì´í„°ëŠ” ì–¸ì œë“ ì§€ ì¬ì‚¬ìš© ê°€ëŠ¥

---

## ğŸ“Š ì‚¬ìš© ì˜ˆì‹œ

### ìˆ˜ì • ì „ (ë¬¸ì œ ë°œìƒ)

```python
# ë°ì´í„° ë¡œë“œ
data = data_combiner.process_and_combine(paths)

# ì²« ë²ˆì§¸ ì²˜ë¦¬
data = cycle_list_processor.process_all_channels(data)
# âŒ ì›ë³¸ dataê°€ ìˆ˜ì •ë¨!

# ë‘ ë²ˆì§¸ ì²˜ë¦¬
results = channel_categorizer.categorize_all_channels(data)
# âŒ dataì˜ cycle_listì— category ì»¬ëŸ¼ì´ ì¶”ê°€ë¨!

# ì›ë³¸ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•˜ë ¤ê³  í•˜ë©´...
# âŒ ì´ë¯¸ ìˆ˜ì •ë˜ì–´ ìˆì–´ì„œ ì›ë³¸ ìƒíƒœë¡œ ëŒì•„ê°ˆ ìˆ˜ ì—†ìŒ!
```

### ìˆ˜ì • í›„ (ë¬¸ì œ í•´ê²°)

```python
# ë°ì´í„° ë¡œë“œ
data_original = data_combiner.process_and_combine(paths)

# ì²« ë²ˆì§¸ ì²˜ë¦¬
data_processed = cycle_list_processor.process_all_channels(data_original)
# âœ… data_originalì€ ê·¸ëŒ€ë¡œ ìœ ì§€ë¨!
# âœ… data_processedëŠ” ìƒˆë¡œìš´ ë³µì‚¬ë³¸!

# ë‘ ë²ˆì§¸ ì²˜ë¦¬
results = channel_categorizer.categorize_all_channels(data_processed)
# âœ… data_processedë„ ê·¸ëŒ€ë¡œ ìœ ì§€ë¨!
# âœ… resultsì—ë§Œ categoryê°€ ì¶”ê°€ëœ ë³µì‚¬ë³¸ì´ ì €ì¥ë¨!

# ì›ë³¸ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì‚¬ìš© ê°€ëŠ¥
data_processed_again = cycle_list_processor.process_all_channels(data_original)
# âœ… ì›ë³¸ì´ ë³´ì¡´ë˜ì–´ ìˆì–´ì„œ ì–¸ì œë“ ì§€ ì¬ì‚¬ìš© ê°€ëŠ¥!
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€

`copy.deepcopy()`ëŠ” ì „ì²´ ë°ì´í„° êµ¬ì¡°ë¥¼ ë³µì‚¬í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì¦ê°€í•©ë‹ˆë‹¤.

**ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ:**

- ì›ë³¸ ë°ì´í„°ë¥¼ ì¬ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ë‹¤ë©´, ì›ë³¸ì„ ì§ì ‘ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ë©”ëª¨ë¦¬ íš¨ìœ¨ì 
- í•˜ì§€ë§Œ **ë°ì´í„° ë¬´ê²°ì„±**ê³¼ **ì¬ì‚¬ìš©ì„±**ì„ ìœ„í•´ì„œëŠ” ë³µì‚¬ë³¸ ì‚¬ìš©ì„ ê¶Œì¥

### ì„±ëŠ¥ ì˜í–¥

- ë³µì‚¬ ì‘ì—…ìœ¼ë¡œ ì¸í•´ ì²˜ë¦¬ ì‹œê°„ì´ ì•½ê°„ ì¦ê°€í•  ìˆ˜ ìˆìŒ
- í•˜ì§€ë§Œ ë°ì´í„° ë³´ì¡´ì˜ ì´ì ì´ ì„±ëŠ¥ ì†ì‹¤ë³´ë‹¤ í¼

---

## âœ… ê²€ì¦ ë°©ë²•

ë…¸íŠ¸ë¶ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```python
import data_combiner
import cycle_list_processor
import channel_categorizer
import importlib

# ëª¨ë“ˆ ì¬ë¡œë”©
importlib.reload(cycle_list_processor)
importlib.reload(channel_categorizer)

# ë°ì´í„° ë¡œë“œ
paths = [r"C:\Users\Ryu\Python_project\data\dataprocess\Rawdata\A1_MP1_4500mAh_T23_1"]
data_original = data_combiner.process_and_combine(paths)

# ì›ë³¸ ë°ì´í„° íƒ€ì… í™•ì¸
channel_key = list(data_original['channels'].keys())[0]
print(f"ì›ë³¸ profile íƒ€ì…: {type(data_original['channels'][channel_key]['profile'])}")
# ì¶œë ¥: <class 'pandas.core.frame.DataFrame'>

# ì²˜ë¦¬
data_processed = cycle_list_processor.process_all_channels(data_original)

# ì›ë³¸ì´ ë³´ì¡´ë˜ì—ˆëŠ”ì§€ í™•ì¸
print(f"ì²˜ë¦¬ í›„ ì›ë³¸ profile íƒ€ì…: {type(data_original['channels'][channel_key]['profile'])}")
# ì¶œë ¥: <class 'pandas.core.frame.DataFrame'> âœ… ì—¬ì „íˆ DataFrame!

print(f"ì²˜ë¦¬ëœ ë°ì´í„° profile íƒ€ì…: {type(data_processed['channels'][channel_key]['profile'])}")
# ì¶œë ¥: <class 'list'> âœ… ìƒˆë¡œìš´ ë³µì‚¬ë³¸ì€ listë¡œ ë³€í™˜ë¨!
```

---

## ğŸ“ ê²°ë¡ 

ë‘ í•¨ìˆ˜ ëª¨ë‘ **ì›ë³¸ ë°ì´í„°ë¥¼ ë³´ì¡´**í•˜ë„ë¡ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤:

1. âœ… `cycle_list_processor.process_all_channels()` - ì…ë ¥ data ê°ì²´ ì „ì²´ë¥¼ ë³µì‚¬
2. âœ… `channel_categorizer.categorize_all_channels()` - ê° cycle_listë¥¼ ë³µì‚¬

ì´ì œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ë„ **ì›ë³¸ ë°ì´í„°ê°€ í›¼ì†ë˜ì§€ ì•Šìœ¼ë©°**, í•„ìš”ì— ë”°ë¼ **ì›ë³¸ ë°ì´í„°ë¥¼ ì¬ì‚¬ìš©**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!
